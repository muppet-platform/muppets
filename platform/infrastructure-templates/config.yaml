# Infrastructure template configuration
# This file defines which templates to use for each language and their variables

templates:
  java:
    base_templates:
      - base/main.tf.template
      - base/variables.tf.template
      - base/outputs.tf.template
      - base/versions.tf.template
    
    platform_templates:
      - platform/security.tf.template
      - platform/tls.tf.template
      - platform/monitoring.tf.template
      - platform/compliance.tf.template
    
    language_templates:
      - java/fargate-java.tf.template
      - java/monitoring-java.tf.template
    
    variables:
      java_cpu: 1024        # Higher CPU for Java applications
      java_memory: 2048     # Higher memory for JVM
      enable_jvm_metrics: true
      java_version: "21"    # Enforce Java 21 LTS
      
  python:
    base_templates:
      - base/main.tf.template
      - base/variables.tf.template
      - base/outputs.tf.template
      - base/versions.tf.template
    
    language_templates: []  # No Python-specific templates yet
    
    variables:
      python_cpu: 512
      python_memory: 1024
      
  nodejs:
    base_templates:
      - base/main.tf.template
      - base/variables.tf.template
      - base/outputs.tf.template
      - base/versions.tf.template
    
    language_templates: []  # No Node.js-specific templates yet
    
    variables:
      nodejs_cpu: 512
      nodejs_memory: 1024

# Module versions for consistent infrastructure
module_versions:
  tls_module_version: "v1.0.0"
  networking_module_version: "v1.0.0"
  fargate_module_version: "v1.0.0"
  monitoring_module_version: "v1.0.0"
  security_module_version: "v1.0.0"
  ecr_module_version: "v1.0.0"
  alb_module_version: "v1.0.0"

# Default values used across all templates
defaults:
  terraform_modules_repo: "git::https://github.com/muppet-platform/terraform-modules.git"
  terraform_state_bucket: "muppet-platform-terraform-state"
  terraform_locks_table: "muppet-platform-terraform-locks"
  domain_suffix: "muppet-platform.internal"
  aws_region: "us-west-2"
  
# Template validation rules
validation:
  required_base_templates:
    - base/main.tf.template
    - base/variables.tf.template
    - base/outputs.tf.template
    - base/versions.tf.template
  
  java_requirements:
    java_version: "21"  # Enforce Java 21 LTS
    min_cpu: 1024      # Minimum CPU for Java apps
    min_memory: 2048   # Minimum memory for JVM