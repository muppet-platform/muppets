name: java-micronaut
version: "1.0.0"
description: "Java Micronaut template - Simple by default, extensible by choice"
language: java
framework: micronaut
port: 3000

# Java 21 LTS enforcement (per steering requirements)
metadata:
  java_version: "21"
  java_distribution: "amazon-corretto"
  micronaut_version: "4.4.4"
  gradle_version: "8.10.2"

# Simple by Default: Auto-generation settings
# These are enabled by default for zero-config experience
# Power users can disable and provide custom implementations
auto_generate:
  infrastructure: true    # Complete OpenTofu with TLS, monitoring, security
  cicd: true             # GitHub Actions workflows optimized for Java
  kiro: true             # Language servers, debugging, steering docs
  tls: true              # Automatic HTTPS with certificate management
  monitoring: true       # CloudWatch, alarms, dashboards
  security: true         # Vulnerability scanning, compliance checks

# Extensible by Choice: Power user configuration
# Only used when auto_generate is disabled for specific components
extensibility:
  custom_modules: false          # Enable custom OpenTofu modules
  infrastructure_overrides: false # Enable infrastructure overrides
  custom_workflows: false        # Enable custom CI/CD workflows
  template_inheritance: false    # Enable template inheritance

# Infrastructure modules (used when auto_generate.infrastructure = false)
terraform_modules:
  - fargate-service
  - monitoring
  - networking
  - ecr

# Required variables (auto-detected when auto_generate = true)
required_variables:
  - muppet_name
  - aws_region
  - environment

# Supported features (auto-configured when auto_generate = true)
supported_features:
  - health_checks
  - metrics
  - logging
  - docker
  - gradle_build
  - unit_tests
  - local_development
  - tls_termination
  - auto_scaling
  - security_scanning

# Template files (core application files always included)
# Infrastructure/CI/CD files only included when auto_generate = false
template_files:
  core:
    - src/
    - build.gradle.template
    - gradle.properties.template
    - settings.gradle.template
    - gradlew
    - gradlew.bat
    - gradle/
    - scripts/
    - README.template.md
    - docker-compose.local.yml.template
  
  # Auto-generated by default (only included if auto_generate = false)
  optional:
    - Dockerfile.template      # Auto-generated with optimized multi-stage build
    - terraform/              # Auto-generated with TLS, monitoring, security
    - .github/workflows/      # Auto-generated with Java-optimized CI/CD
    - .kiro/                  # Auto-generated with language servers, debugging

# Power user extensions (only used when extensibility features are enabled)
extensions:
  custom_modules_path: "infrastructure/custom-modules/"
  overrides_path: "infrastructure/overrides/"
  custom_workflows_path: ".github/workflows/"
  custom_kiro_path: ".kiro/extensions/"